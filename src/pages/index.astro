---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import Link from "../components/Link.astro";
import { Image } from "astro:assets";
import where from "../assets/where-shall-we-stay.png";
import face from "../assets/face.jpg";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<BaseLayout>
  <nav class="flex text-xl my-2 font-medium font-serif justify-between">
    <Link href="/">home/</Link>
    <Link href="/posts">posts/</Link>
    <Link href="/about">about/</Link>
  </nav>
  <header class="mt-5">
    <Image
      src={face}
      height={160}
      class="mb-3 mx-auto"
      alt="A somewhat surprised white man, Black and White, light face on dark background with a broken glass effect"
    />
    <h1 class="text-5xl text-center font-display">Structs & Company</h1>
    <p class="italic font-serif text-xl text-center">A Hacker's Best Friend</p>
    <article class="font-serif mt-5 text-xl">
      <p class="">
        Hello, I Hope you're doing well today. My name is Yusuf and I write
        articles on this blog. I work as a software engineer. in my free time I
        go hiking, play boardgames or edit my neovim config.
      </p>
      <br />
      <p>
        Sometimes I write software outside my job as well, I enjoy coding in
        golang and laravel.
      </p>
    </article>
  </header>
  <article class="font-serif text-xl mt-5">
    <h2 class="text-2xl font-bold mt-3 mb-2 text-amber-700 font-smallcaps">
      Latest posts
    </h2>
    <ul class="list-disc space-y-3 list-inside">
      {
        posts.map((post) => (
          <li class="flex justify-between items-baseline">
            <Link href={"posts/" + post.slug}>{post.data.title}</Link>
            <time
              datetime={post.data.pubDate.toString()}
              class="italic tabular-nums text-sm"
            >
              {post.data.pubDate.toLocaleDateString("en-US", {
                month: "short",
                day: "2-digit",
              })}
            </time>
          </li>
        ))
      }
    </ul>

    <Link href="/posts" styles="mt-2 text-2xl block font-bold text-center">
      All Posts &rarr;
    </Link>
    <Image src={where} quality="100" class="-rotate-1 mt-5" alt="" />
  </article>
  <!-- <img src="tardis.gif" class="w-16 absolute bottom-0 left-0" alt="" /> -->
</BaseLayout>
